#!/bin/bash
# DiscordSRV Plugin Default Environment Variables
# Only loaded if /templates/plugins/DiscordSRV directory exists
# Documentation: https://github.com/DiscordSRV/DiscordSRV/wiki

# ========================================
# REQUIRED DISCORD CONFIGURATION
# ========================================

# Discord bot token (REQUIRED - get from Discord Developer Portal)
export DISCORD_BOT_TOKEN="${DISCORD_BOT_TOKEN:-}"

# Discord channel ID for in-game chat relay (REQUIRED)
export DISCORD_CHAT_CHANNEL_ID="${DISCORD_CHAT_CHANNEL_ID:-}"

# Discord channel ID for console log relay (REQUIRED)
export DISCORD_CONSOLE_CHANNEL_ID="${DISCORD_CONSOLE_CHANNEL_ID:-}"

# ========================================
# DISCORD BOT STATUS/PRESENCE
# ========================================

# Enable bot presence/status updates
export DISCORD_ENABLE_PRESENCE="${DISCORD_ENABLE_PRESENCE:-false}"

# Game status text shown in Discord
export DISCORD_GAME_STATUS="${DISCORD_GAME_STATUS:-Minecraft}"

# Bot online status: ONLINE, IDLE, DO_NOT_DISTURB, INVISIBLE
export DISCORD_ONLINE_STATUS="${DISCORD_ONLINE_STATUS:-ONLINE}"

# Status update rate (in minutes)
export DISCORD_STATUS_UPDATE_RATE="${DISCORD_STATUS_UPDATE_RATE:-2}"

# ========================================
# CHAT RELAY SETTINGS
# ========================================

# Enable Discord to Minecraft chat
export DISCORD_CHAT_DISCORD_TO_MC="${DISCORD_CHAT_DISCORD_TO_MC:-true}"

# Enable Minecraft to Discord chat
export DISCORD_CHAT_MC_TO_DISCORD="${DISCORD_CHAT_MC_TO_DISCORD:-true}"

# Truncate long messages (character limit)
export DISCORD_CHAT_TRUNCATE_LENGTH="${DISCORD_CHAT_TRUNCATE_LENGTH:-256}"

# Translate @mentions between platforms
export DISCORD_CHAT_TRANSLATE_MENTIONS="${DISCORD_CHAT_TRANSLATE_MENTIONS:-true}"

# Emoji behavior: show, name, hide
export DISCORD_CHAT_EMOJI_BEHAVIOR="${DISCORD_CHAT_EMOJI_BEHAVIOR:-name}"

# Emote behavior: show, name, hide
export DISCORD_CHAT_EMOTE_BEHAVIOR="${DISCORD_CHAT_EMOTE_BEHAVIOR:-name}"

# Command prefix for chat commands
export DISCORD_CHAT_PREFIX="${DISCORD_CHAT_PREFIX:-}"

# Treat prefix as blacklist instead of whitelist
export DISCORD_CHAT_PREFIX_BLACKLIST="${DISCORD_CHAT_PREFIX_BLACKLIST:-false}"

# Roles that get colored names in Minecraft
export DISCORD_CHAT_COLOR_ROLES="${DISCORD_CHAT_COLOR_ROLES:-Admin}"

# Broadcast Discord messages to console
export DISCORD_CHAT_BROADCAST_TO_CONSOLE="${DISCORD_CHAT_BROADCAST_TO_CONSOLE:-true}"

# Require linked Discord account to chat
export DISCORD_CHAT_REQUIRE_LINKED="${DISCORD_CHAT_REQUIRE_LINKED:-false}"

# Block messages from bots
export DISCORD_CHAT_BLOCK_BOTS="${DISCORD_CHAT_BLOCK_BOTS:-true}"

# Block messages from webhooks
export DISCORD_CHAT_BLOCK_WEBHOOKS="${DISCORD_CHAT_BLOCK_WEBHOOKS:-true}"

# Treat blocked roles as whitelist
export DISCORD_CHAT_BLOCKED_ROLES_AS_WHITELIST="${DISCORD_CHAT_BLOCKED_ROLES_AS_WHITELIST:-false}"

# Treat allowed roles as whitelist
export DISCORD_CHAT_ROLES_AS_WHITELIST="${DISCORD_CHAT_ROLES_AS_WHITELIST:-false}"

# ========================================
# CONSOLE RELAY SETTINGS
# ========================================

# Console channel refresh rate (in seconds)
export DISCORD_CONSOLE_REFRESH_RATE="${DISCORD_CONSOLE_REFRESH_RATE:-5}"

# Console log file pattern
export DISCORD_CONSOLE_LOG_FILE="${DISCORD_CONSOLE_LOG_FILE:-Console-%date%.log}"

# Treat console blacklist as whitelist
export DISCORD_CONSOLE_BLACKLIST_AS_WHITELIST="${DISCORD_CONSOLE_BLACKLIST_AS_WHITELIST:-false}"

# Use code blocks for console output
export DISCORD_CONSOLE_USE_CODE_BLOCKS="${DISCORD_CONSOLE_USE_CODE_BLOCKS:-true}"

# Block messages from bots in console channel
export DISCORD_CONSOLE_BLOCK_BOTS="${DISCORD_CONSOLE_BLOCK_BOTS:-false}"

# ========================================
# DISCORD CONSOLE COMMANDS
# ========================================

# Enable console commands from Discord
export DISCORD_CHAT_CONSOLE_COMMANDS_ENABLED="${DISCORD_CHAT_CONSOLE_COMMANDS_ENABLED:-false}"

# Notify in Discord if command fails
export DISCORD_CHAT_CONSOLE_NOTIFY_ERRORS="${DISCORD_CHAT_CONSOLE_NOTIFY_ERRORS:-true}"

# Command prefix for console commands
export DISCORD_CHAT_CONSOLE_PREFIX="${DISCORD_CHAT_CONSOLE_PREFIX:-!c}"

# Roles allowed to run console commands
export DISCORD_CHAT_CONSOLE_ROLES="${DISCORD_CHAT_CONSOLE_ROLES:-Admin}"

# Roles that bypass command whitelist
export DISCORD_CHAT_CONSOLE_BYPASS_ROLES="${DISCORD_CHAT_CONSOLE_BYPASS_ROLES:-Owner}"

# Treat command whitelist as blacklist
export DISCORD_CHAT_CONSOLE_WHITELIST_AS_BLACKLIST="${DISCORD_CHAT_CONSOLE_WHITELIST_AS_BLACKLIST:-false}"

# Auto-delete command output after X seconds (0 = never)
export DISCORD_CHAT_CONSOLE_EXPIRATION="${DISCORD_CHAT_CONSOLE_EXPIRATION:-0}"

# Delete command request message
export DISCORD_CHAT_CONSOLE_DELETE_REQUEST="${DISCORD_CHAT_CONSOLE_DELETE_REQUEST:-true}"

# ========================================
# PLAYER LIST COMMAND
# ========================================

# Enable !playerlist command
export DISCORD_LIST_COMMAND_ENABLED="${DISCORD_LIST_COMMAND_ENABLED:-true}"

# Playerlist command message key
export DISCORD_LIST_COMMAND_MESSAGE="${DISCORD_LIST_COMMAND_MESSAGE:-playerlist}"

# Auto-delete after X seconds (0 = never)
export DISCORD_LIST_COMMAND_EXPIRATION="${DISCORD_LIST_COMMAND_EXPIRATION:-10}"

# Delete command request message
export DISCORD_LIST_COMMAND_DELETE_REQUEST="${DISCORD_LIST_COMMAND_DELETE_REQUEST:-true}"

# ========================================
# TOPIC/CHANNEL UPDATES
# ========================================

# Update topic when server shuts down
export DISCORD_TOPIC_UPDATE_AT_SHUTDOWN="${DISCORD_TOPIC_UPDATE_AT_SHUTDOWN:-true}"

# Topic update rate (in minutes)
export DISCORD_TOPIC_UPDATE_RATE="${DISCORD_TOPIC_UPDATE_RATE:-10}"

# ========================================
# ACCOUNT LINKING
# ========================================

# Discord role to give linked accounts
export DISCORD_LINKED_ROLE_ID="${DISCORD_LINKED_ROLE_ID:-}"

# Allow users to relink accounts
export DISCORD_ALLOW_RELINK="${DISCORD_ALLOW_RELINK:-false}"

# Send link messages via PM
export DISCORD_LINKED_USE_PM="${DISCORD_LINKED_USE_PM:-true}"

# Auto-delete link messages after X seconds (0 = never)
export DISCORD_LINKED_DELETE_SECONDS="${DISCORD_LINKED_DELETE_SECONDS:-0}"

# ========================================
# DATABASE SETTINGS (Optional)
# ========================================

# JDBC URL for database storage
export DISCORD_JDBC_URL="${DISCORD_JDBC_URL:-jdbc:mysql://HOST:PORT/DATABASE?autoReconnect=true&useSSL=false}"

# Database table prefix
export DISCORD_JDBC_PREFIX="${DISCORD_JDBC_PREFIX:-discordsrv}"

# Database username
export DISCORD_JDBC_USERNAME="${DISCORD_JDBC_USERNAME:-username}"

# Database password
export DISCORD_JDBC_PASSWORD="${DISCORD_JDBC_PASSWORD:-password}"

# ========================================
# WEBHOOK SETTINGS (Advanced)
# ========================================

# Use webhooks for message delivery
export DISCORD_WEBHOOK_DELIVERY="${DISCORD_WEBHOOK_DELIVERY:-false}"

# Webhook username format
export DISCORD_WEBHOOK_USERNAME_FORMAT="${DISCORD_WEBHOOK_USERNAME_FORMAT:-%displayname%}"

# Webhook message format
export DISCORD_WEBHOOK_MESSAGE_FORMAT="${DISCORD_WEBHOOK_MESSAGE_FORMAT:-%message%}"

# Use Discord username in webhooks
export DISCORD_WEBHOOK_USERNAME_FROM_DISCORD="${DISCORD_WEBHOOK_USERNAME_FROM_DISCORD:-false}"

# Use Discord avatar in webhooks
export DISCORD_WEBHOOK_AVATAR_FROM_DISCORD="${DISCORD_WEBHOOK_AVATAR_FROM_DISCORD:-false}"

# Custom avatar URL
export DISCORD_AVATAR_URL="${DISCORD_AVATAR_URL:-}"

# ========================================
# ADVANCED SETTINGS
# ========================================

# Enable message reserializer to Discord
export DISCORD_RESERIALIZER_TO_DISCORD="${DISCORD_RESERIALIZER_TO_DISCORD:-false}"

# Enable message reserializer to Minecraft
export DISCORD_RESERIALIZER_TO_MINECRAFT="${DISCORD_RESERIALIZER_TO_MINECRAFT:-false}"

# Enable reserializer in broadcasts
export DISCORD_RESERIALIZER_IN_BROADCAST="${DISCORD_RESERIALIZER_IN_BROADCAST:-false}"

# Cancel console log if Discord logging fails
export DISCORD_CANCEL_CONSOLE_IF_LOGGING_FAILED="${DISCORD_CANCEL_CONSOLE_IF_LOGGING_FAILED:-true}"

# Force language (e.g., en, de, fr, or 'none' for auto)
export DISCORD_FORCED_LANGUAGE="${DISCORD_FORCED_LANGUAGE:-none}"

# Force TLS for Discord connection
export DISCORD_FORCE_TLS="${DISCORD_FORCE_TLS:-true}"

# Use no-op hostname verifier (insecure)
export DISCORD_NOOP_HOSTNAME_VERIFIER="${DISCORD_NOOP_HOSTNAME_VERIFIER:-false}"

# Maximum DNS resolution attempts
export DISCORD_MAX_DNS_ATTEMPTS="${DISCORD_MAX_DNS_ATTEMPTS:-3}"

# Timestamp format (Java SimpleDateFormat)
export DISCORD_TIMESTAMP_FORMAT="${DISCORD_TIMESTAMP_FORMAT:-EEE, d. MMM yyyy HH:mm:ss z}"

# Date format (Java SimpleDateFormat)
export DISCORD_DATE_FORMAT="${DISCORD_DATE_FORMAT:-yyyy-MM-dd}"

# Timezone (default = server timezone)
export DISCORD_TIMEZONE="${DISCORD_TIMEZONE:-default}"

# Play sound when mentioned in Minecraft
export DISCORD_MINECRAFT_MENTION_SOUND="${DISCORD_MINECRAFT_MENTION_SOUND:-true}"

# VentureChat Bungee mode
export DISCORD_VENTURECHAT_BUNGEE="${DISCORD_VENTURECHAT_BUNGEE:-false}"

# Use modern Paper chat system
export DISCORD_USE_MODERN_PAPER_CHAT="${DISCORD_USE_MODERN_PAPER_CHAT:-false}"

# Discord server invite link
export DISCORD_INVITE_LINK="${DISCORD_INVITE_LINK:-Join our Discord!}"

# ========================================
# WATCHDOG SETTINGS
# ========================================

# Enable watchdog (auto-restart on freeze)
export DISCORD_WATCHDOG_ENABLED="${DISCORD_WATCHDOG_ENABLED:-true}"

# Watchdog timeout (in seconds)
export DISCORD_WATCHDOG_TIMEOUT="${DISCORD_WATCHDOG_TIMEOUT:-30}"

# Message count for watchdog
export DISCORD_WATCHDOG_MESSAGE_COUNT="${DISCORD_WATCHDOG_MESSAGE_COUNT:-3}"

# ========================================
# PROXY SETTINGS (Optional)
# ========================================

# Proxy host
export DISCORD_PROXY_HOST="${DISCORD_PROXY_HOST:-}"

# Proxy port
export DISCORD_PROXY_PORT="${DISCORD_PROXY_PORT:-0}"

# Proxy username
export DISCORD_PROXY_USER="${DISCORD_PROXY_USER:-}"

# Proxy password
export DISCORD_PROXY_PASSWORD="${DISCORD_PROXY_PASSWORD:-}"
