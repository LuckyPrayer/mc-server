FROM itzg/minecraft-server:latest

# Development Environment Configuration
ENV EULA=TRUE \
    TYPE=PAPER \
    VERSION=LATEST \
    MEMORY=1G \
    MAX_MEMORY=2G \
    SERVER_NAME="[DEV] Minecraft Server" \
    DIFFICULTY=peaceful \
    MODE=creative \
    ALLOW_NETHER=true \
    ENABLE_COMMAND_BLOCK=true \
    MAX_PLAYERS=10 \
    ONLINE_MODE=false \
    PVP=false \
    VIEW_DISTANCE=8 \
    SPAWN_PROTECTION=0 \
    ENABLE_RCON=true \
    RCON_PASSWORD=devpass \
    DEBUG=true \
    LOG_LEVEL=DEBUG

# Development-specific settings
ENV MAX_TICK_TIME=-1 \
    SPAWN_MONSTERS=false \
    SPAWN_ANIMALS=true \
    ALLOW_FLIGHT=true

# Copy datapacks, plugins, and resourcepacks from local directories
COPY --chown=minecraft:minecraft datapacks/ /datapacks/
COPY --chown=minecraft:minecraft plugins/ /plugins/
COPY --chown=minecraft:minecraft resourcepacks/ /resourcepacks/
COPY --chown=minecraft:minecraft config/ /config/

# Development labels
LABEL environment="development" \
      maintainer="dev-team" \
      description="Minecraft Server - Development Build"

# Expose Minecraft server port and RCON
EXPOSE 25565 25575

# The base image handles the rest of the setup
